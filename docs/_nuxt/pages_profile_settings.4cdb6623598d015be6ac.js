webpackJsonp([8],{"4/rD":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{staticClass:"form-container",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[a("div",{staticClass:"form-container-inner elevation-1 text-xs-left"},[a("v-form",{ref:"settingsForm",model:{value:t.settingsValid,callback:function(e){t.settingsValid=e},expression:"settingsValid"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"mb-4",attrs:{xs12:""}},[a("h1",[t._v("Account Settings")])]),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Name",color:"teal","multi-line":"",rows:"2","no-resize":"",rules:[t.rules.required],"validate-on-blur":""},on:{change:function(e){t.hasEdits.name=!0}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"About","multi-line":"","no-resize":"",rows:"2",counter:"255",maxlength:"255",color:"teal","auto-grow":""},on:{change:function(e){t.hasEdits.about=!0}},model:{value:t.about,callback:function(e){t.about=e},expression:"about"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"What do you do?","multi-line":"","no-resize":"",rows:"2",counter:"255",maxlength:"255",color:"teal","auto-grow":""},on:{change:function(e){t.hasEdits.whatdo=!0}},model:{value:t.whatdo,callback:function(e){t.whatdo=e},expression:"whatdo"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Profile URL",counter:"32",maxlength:"32",color:"teal"},on:{change:function(e){t.hasEdits.url=!0}},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),t.profile.socialAuth?t._e():a("v-flex",[a("h2",[t._v("Change Password")])]),t.profile.socialAuth?t._e():a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Old Password",counter:"32",maxlength:"32",color:"teal"},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),t.profile.socialAuth?t._e():a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"New Password",counter:"32",maxlength:"32",color:"teal"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1),t.profile.socialAuth?t._e():a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Confirm New Password",counter:"32",maxlength:"32",color:"teal"},model:{value:t.newPasswordAgain,callback:function(e){t.newPasswordAgain=e},expression:"newPasswordAgain"}})],1),a("v-flex",{staticClass:"text-xs-left",attrs:{xs12:""}},[a("v-spacer"),a("v-btn",{staticClass:"ml-0",attrs:{outline:"",flat:""},nativeOn:{click:function(e){t.saveSettings()}}},[t._v("Save Changes")])],1)],1)],1)],1)])],1)],1)};i._withStripped=!0;var o={render:i,staticRenderFns:[]};e.a=o},BfXy:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'.container[data-v-21249e1c]{margin-top:56px}.form-container[data-v-21249e1c]{padding:0 45px}.form-container-inner[data-v-21249e1c]{background-color:#fff;padding:40px 35px 15px}@media only screen and (max-width:600px){.form-container[data-v-21249e1c]{padding:0}.form-container-inner[data-v-21249e1c]{padding:40px 18px 15px}}.dp-setting[data-v-21249e1c]{position:relative;margin:0 auto;height:98px;width:98px;background-size:cover;background-position:50%;border-radius:69%;cursor:pointer;font-size:98px;color:#000;text-align:center}.dp-setting.picture-error[data-v-21249e1c]:after{position:absolute;content:"\\D7";height:98px;width:98px;top:50%;left:50%;background-color:#bce0e0;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border-radius:69%;line-height:1}',""])},hCSA:function(t,e,a){"use strict";var i=a("Dd8w"),o=a.n(i),s=a("mtWM"),r=a.n(s),n=a("NYxO");e.a={data:function(){return{config:this.$store.state.config,settingsValid:!0,name:"",about:"",whatdo:"",url:"",oldPassword:"",newPassword:"",newPasswordAgain:"",rules:{required:function(t){return!!t||"Field is required."},email:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||"Invalid e-mail."}},pictureError:{error:!1,msg:""},hasEdits:{name:!1,about:!1,whatdo:!1,url:!1},editSuccess:{name:!1,about:!1,whatdo:!1,url:!1}}},computed:o()({},Object(n.mapGetters)({isLoggedIn:"getLoginState",socialAuth:"getSocialAuth",profile:"getUserData"})),mounted:function(){var t=this;this.modalInit(),this.$root.$on("settingsModalClosed",function(e){e&&t.modalInit()}),this.$watch("editSuccess",function(e){t.reloadSettings()},{deep:!0})},methods:{reloadSettings:function(){for(var t in this.hasEdits)if(this.hasEdits[t]&&this.editSuccess[t])return void this.$router.go()},modalInit:function(){var t=this;setTimeout(function(){t.name=t.profile.name,t.about=t.profile.about,t.whatdo=t.profile.whatdo,t.url=t.profile.url},150)},trimInputs:function(){this.name=this.name.trim(),this.about=this.about.trim(),this.whatdo=this.whatdo.trim(),this.url=this.url.trim()},saveSettings:function(){var t=this;this.trimInputs(),setTimeout(function(){if(t.$refs.settingsForm.validate()){switch(!0){case t.hasEdits.name:t.nameEdit();break;case t.hasEdits.about:t.aboutEdit();break;case t.hasEdits.whatdo:t.whatdoEdit();break;case t.hasEdits.url:t.urlEdit();break;case t.hasEdits.picture:t.pictureEdit()}t.profile.name=t.name,t.profile.about=t.about,t.profile.whatdo=t.whatdo,t.profile.url=t.url,t.$store.commit("updateUserData",t.profile),t.$store.commit("updateUserCookie",t.profile)}},0)},nameEdit:function(){this.editExecute({table:"user_profiles",field:"name",where:"user_id = "+this.profile.user_id,newstr:this.name})},aboutEdit:function(){this.editExecute({table:"user_profiles",field:"about",where:"user_id = "+this.profile.user_id,newstr:this.about})},whatdoEdit:function(){this.editExecute({table:"user_profiles",field:"whatdo",where:"user_id = "+this.profile.user_id,newstr:this.whatdo})},urlEdit:function(){var t={user_id:this.profile.user_id,url:this.url};r.a.post(this.config.api+"/changeurl.php",t,this.config.axiosHeader).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},editExecute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={table:t.table,field:t.field,where:t.where,newstr:t.newstr,id:t.id,sanitize:"false"};r.a.post(this.config.api+"/update.php",e,this.config.axiosHeader).then(function(e){console.log(e),"success!"==e.data&&this.$set(this.editSuccess,t.field,!0)}.bind(this)).catch(function(t){console.log(t.data)}),this.$root.$emit("settingsModal",!1)}}}},mwBl:function(t,e,a){var i=a("BfXy");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3a9b74a8",i,!1,{sourceMap:!1})},yU9n:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("hCSA"),o=a("4/rD"),s=!1;var r=function(t){s||a("mwBl")},n=a("VU/8")(i.a,o.a,!1,r,"data-v-21249e1c",null);n.options.__file="pages\\profile\\settings.vue",e.default=n.exports}});