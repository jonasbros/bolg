webpackJsonp([3],{"+r8F":function(t,e,s){"use strict";var o=s("526/"),i=s("AvLQ"),a=!1;var n=function(t){a||s("i7u4")},r=s("VU/8")(o.a,i.a,!1,n,null,null);r.options.__file="components\\PostCard.vue",e.a=r.exports},"/stw":function(t,e,s){"use strict";var o=s("Dd8w"),i=s.n(o),a=s("NYxO"),n=s("mtWM"),r=s.n(n);e.a={props:["person"],data:function(){return{config:this.$store.state.config,loader:null,loading:!1}},computed:i()({},Object(a.mapGetters)({isLoggedIn:"getLoginState",userData:"getUserData",userID:"getUserID"})),methods:{follow:function(){if(null==this.loader){this.loader="loading";var t=this.loader;this[t]=!this[t];var e={follower_id:this.userID,following_id:this.person.user_id,follow:!this.person.isFollowing};r.a.post(this.config.api+"/follow.php",e,this.config.axiosHeader).then(function(e){e.data.success&&(this.person.isFollowing=!this.person.isFollowing,this.$root.$emit("changefollowingCount",this.person.isFollowing),this[t]=!1,this.loader=null)}.bind(this)).catch(function(t){console.log(t)})}}}}},"0lll":function(t,e,s){var o=s("tAe9");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("4a9361dc",o,!1,{sourceMap:!1})},"2u4j":function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".flex[data-v-e0e442e6]{margin:7px 0;background-color:#fff;padding:25px}.person-inner[data-v-e0e442e6],.person[data-v-e0e442e6]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:left}.person[data-v-e0e442e6]{cursor:pointer;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.person div[data-v-e0e442e6]:not(:last-of-type){margin-right:15px}.picture[data-v-e0e442e6]{height:64px;width:64px;background-size:cover;background-position:50%;border-radius:69%}",""])},"526/":function(t,e,s){"use strict";var o=s("Dd8w"),i=s.n(o),a=s("mtWM"),n=s.n(a),r=s("NYxO"),l=s("e1SC");e.a={props:["post","titleLength","excerptLength","index"],data:function(){return{config:this.$store.state.config,userActions:!1,deldialog:!1,dashedTitle:""}},computed:i()({},Object(r.mapGetters)({isLoggedIn:"getLoginState",userData:"getUserData",userID:"getUserID"}),{likeColor:function(){return this.post.user_liked?"teal lighten-1":"grey darken-2"},bookmarkColor:function(){return this.post.user_bookmarked?"teal lighten-1":"grey darken-2"}}),mounted:function(){Object(l.a)(".headline",80),Object(l.a)(".black--text",60),this.post.user_post&&this.$root.$on("closeUserActions",function(t){this.userActions&&(this.userActions=t)}.bind(this))},methods:{fbShare:function(){FB.ui({method:"feed",link:"https://jonasbros.github.io/bolg/#/post/"+this.$options.filters.replaceSpaceWithDash(this.post.title)+"/"+this.post.id,app_id:"571629196513066",caption:this.post.excerpt,source:this.post.featured_img},function(t){console.log(t)})},deletePost:function(){this.$root.$emit("deletePost",this.index);var t={sanitize:"false",newint:1,table:"blogs",field:"deleted",where:"id = "+this.post.id};n.a.post(this.config.api+"/update.php",t,this.config.axiosHeader).then(function(t){"success!"==t.data&&this.$root.$emit("deletePost",payload)}.bind(this)).catch(function(t){console.log(t)})},like:function(t){this.post.user_liked=!this.post.user_liked;var e={liked:this.post.user_liked,blog_id:t,user_id:this.userID};n.a.post(this.config.api+"likeupdate.php",e,this.config.axiosHeader).then(function(t){}).catch(function(t){console.log(t)})},bookmark:function(t){this.post.user_bookmarked=!this.post.user_bookmarked;var e={bookmark:this.post.user_bookmarked,blog_id:t,user_id:this.userID};n.a.post(this.config.api+"bookmark.php",e,this.config.axiosHeader).then(function(t){}).catch(function(t){console.log(t)})}}}},AvLQ:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-flex",[s("div",{staticClass:"card-outer",class:{"user-post":1==t.post.user_post}},[s("v-card",{staticClass:"elevation-2"},[""!=t.post.featured_img?s("router-link",{attrs:{to:{path:"/post/"+t.$options.filters.replaceSpaceWithDash(t.post.title)+"/"+t.post.id}}},[s("v-card-media",{attrs:{src:t.post.featured_img,height:"180px"}})],1):t._e(),s("v-card-title",{attrs:{"primary-title":""}},[s("div",{staticClass:"text-xs-left"},[s("router-link",{attrs:{to:{path:"/post/"+t.$options.filters.replaceSpaceWithDash(t.post.title)+"/"+t.post.id}}},[s("span",{staticClass:"headline"},[t._v("                \n              "+t._s(t.post.title)+"\n            ")])]),t.post.user_post?s("v-btn",{staticClass:"user-post-actions",attrs:{flat:"",icon:""},on:{click:function(e){e.stopPropagation(),t.userActions=!t.userActions}}},[s("v-icon",[t._v("more_horiz")])],1):t._e(),t.post.user_post?s("div",{directives:[{name:"show",rawName:"v-show",value:t.userActions,expression:"userActions"}],staticClass:"post-actions-content elevation-1 text-xs-left"},[s("router-link",{attrs:{to:"/edit/"+t.post.id}},[t._v("\n              Edit\n            ")]),s("p",{on:{click:function(e){e.stopPropagation(),t.deldialog=!0,t.userActions=!1}}},[t._v("\n              Delete\n            ")])],1):t._e(),null==t.post.categories?s("router-link",{staticClass:"mb-2 grey--text d-block",attrs:{to:"/browse/uncategorized/newest"}},[t._v("Uncategorized")]):t._e(),null!=t.post.categories?s("router-link",{staticClass:"mb-2 grey--text d-block",attrs:{to:"/browse/"+t.post.categories[0].toLowerCase()+"/newest"}},[t._v(t._s(t.post.categories[0]))]):t._e(),s("div",{staticClass:"black--text",domProps:{innerHTML:t._s(t.post.excerpt)}})],1)]),s("v-card-actions",{staticClass:"text-xs-left"},[s("div",[s("router-link",{attrs:{to:{path:"/profile/"+t.post.author_url}}},[s("div",{staticClass:"card-author-pic d-inline-block",style:"background-image: url("+t.post.authorPic+")"})]),s("div",{staticClass:"card-author-name d-inline-block"},[s("router-link",{attrs:{to:{path:"/profile/"+t.post.author_url}}},[s("div",{staticClass:"grey--text"},[t._v(t._s(t.post.authorName))])]),s("div",{staticClass:"grey--text"},[t._v(t._s(t._f("DateDiffFilter")(t.post.created)))])],1)],1),t.isLoggedIn?s("v-btn",{staticStyle:{"margin-left":"auto"},attrs:{flat:"",icon:"",color:t.likeColor},nativeOn:{click:function(e){t.like(t.post.id)}}},[s("v-icon",[t._v("favorite")])],1):t._e(),s("v-menu",{style:t.isLoggedIn?"":"margin-left: auto;",attrs:{"offset-y":"",top:"",left:""}},[s("v-btn",{attrs:{slot:"activator",flat:"",icon:"",color:"grey darken-3",dark:""},slot:"activator"},[s("v-icon",[t._v("share")])],1),s("v-list",{attrs:{subheader:""}},[s("v-subheader",[t._v("Share story on: ")]),s("v-list-tile",[s("v-btn",{staticStyle:{"background-color":"#4267b2"},attrs:{dark:"",depressed:""},on:{click:t.fbShare}},[s("svg",{staticClass:"_1pbq",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",color:"#ffffff"}},[s("path",{attrs:{fill:"#ffffff","fill-rule":"evenodd",d:"M8 14H3.667C2.733 13.9 2 13.167 2 12.233V3.667A1.65 1.65 0 0 1\n                3.667 2h8.666A1.65 1.65 0 0 1 14 3.667v8.566c0 .934-.733\n                1.667-1.667\n                1.767H10v-3.967h1.3l.7-2.066h-2V6.933c0-.466.167-.9.867-.9H12v-1.8c.033\n                0-.933-.266-1.533-.266-1.267 0-2.434.7-2.467\n                2.133v1.867H6v2.066h2V14z"}})]),s("span",[t._v("Facebook")])])],1)],1)],1),t.isLoggedIn?s("v-btn",{attrs:{flat:"",icon:"",color:t.bookmarkColor},on:{click:function(e){e.stopPropagation(),t.bookmark(t.post.id)}}},[s("v-icon",[t._v("bookmark")])],1):t._e()],1)],1)],1),s("v-layout",{staticClass:"delete-modal",attrs:{row:"","justify-center":""}},[s("div",{staticClass:"modal-overlay",class:[{invisible:!t.deldialog},{visible:t.deldialog}]}),s("v-dialog",{attrs:{"max-width":"480"},model:{value:t.deldialog,callback:function(e){t.deldialog=e},expression:"deldialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("Delete")]),s("v-card-text",[t._v("Are you sure you want to delete this post?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"teal lighten-1",flat:"flat",outline:""},nativeOn:{click:function(e){t.deletePost(),t.deldialog=!1}}},[t._v("Delete")]),s("v-btn",{attrs:{color:"teal lighten-1",flat:"flat",outline:""},nativeOn:{click:function(e){t.deldialog=!1}}},[t._v("Cancel")])],1)],1)],1)],1)],1)};o._withStripped=!0;var i={render:o,staticRenderFns:[]};e.a=i},Dd19:function(t,e,s){var o=s("2u4j");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("f68223ae",o,!1,{sourceMap:!1})},"Fo/x":function(t,e,s){"use strict";var o=s("Dd8w"),i=s.n(o),a=s("mtWM"),n=s.n(a),r=s("NYxO"),l=s("+r8F"),c=s("oIMZ"),p=s("HhAh"),d=s.n(p);e.a={components:{postcard:l.a,personcard:c.a},data:function(){return{config:this.$store.state.config,term:this.$route.params.term,tabs:null,posts:[],people:[],isLoadingPosts:!1,peoplePaginate:{page:1,total:0,pages:1},postsPaginate:{page:1,total:0,pages:1},perPage:8}},watch:{term:d()(function(){this.isLoadingPosts=!0,this.searchExec()},500)},computed:i()({},Object(r.mapGetters)({isLoggedIn:"getLoginState",userData:"getUserData",userID:"getUserID"})),beforeDestroy:function(){window.onscroll=null},created:function(){window.onscroll=function(){this.infiniteScroll()}.bind(this),setTimeout(function(){this.searchExec()}.bind(this),150)},methods:{infiniteScroll:function(){this.trigger=document.querySelector(".search").offsetHeight+71,"tab-posts"==this.tabs&&window.scrollY>=this.trigger-window.innerHeight&&0==this.isLoadingPosts&&this.postsPaginate.page<this.postsPaginate.pages&&(this.isLoadingPosts=!0,this.postsPaginate.page+=1,this.searchExec()),"tab-people"==this.tabs&&window.scrollY>=this.trigger-window.innerHeight&&0==this.isLoadingPosts&&this.peoplePaginate.page<this.peoplePaginate.pages&&(this.isLoadingPosts=!0,this.peoplePaginate.page+=1,this.searchExec())},search:function(){this.term!=this.$route.params.term&&this.$router.push({path:"/search/"+this.term})},searchExec:function(){var t={term:this.term,people_cpage:this.peoplePaginate.page,posts_cpage:this.postsPaginate.page,user_id:this.userID,limit:this.perPage};n.a.post(this.config.api+"search.php",t,this.config.axiosHeader).then(function(t){if(1==this.peoplePaginate.page&&1==this.postsPaginate.page)this.people=t.data.people.results,this.posts=t.data.posts.results,this.peoplePaginate.total=t.data.people.total,this.peoplePaginate.pages=Math.ceil(t.data.people.total/this.perPage),this.postsPaginate.total=t.data.posts.total,this.postsPaginate.pages=Math.ceil(t.data.posts.total/this.perPage);else{if("tab-posts"==this.tabs)for(var e=0;e<this.perPage;e++)void 0!==t.data.posts.results[e]&&this.posts.push(t.data.posts.results[e]);if("tab-people"==this.tabs)for(e=0;e<this.perPage;e++)void 0!==t.data.people.results[e]&&this.people.push(t.data.people.results[e])}this.isLoadingPosts=!1}.bind(this)).catch(function(t){console.log(t)})}}}},HhAh:function(t,e){t.exports=function(t,e,s){var o,i,a,n,r;function l(){var c=Date.now()-n;c<e&&c>=0?o=setTimeout(l,e-c):(o=null,s||(r=t.apply(a,i),a=i=null))}null==e&&(e=100);var c=function(){a=this,i=arguments,n=Date.now();var c=s&&!o;return o||(o=setTimeout(l,e)),c&&(r=t.apply(a,i),a=i=null),r};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(r=t.apply(a,i),a=i=null,clearTimeout(o),o=null)},c}},MNqr:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".card{background-color:#fff}.card__title.card__title--primary{display:inline-block;word-break:break-word;width:100%;position:relative}.headline{display:block;margin-bottom:15px;font-weight:700}.card__actions{padding:16px}.black--text{display:inline-block;word-break:break-word}.card-author-name,.card-author-pic{vertical-align:middle}.card-author-pic{height:36px;width:36px;margin-right:10px;border-radius:69%;background-size:cover;background-position:50%}.user-post .headline{max-width:85%}.user-post-actions{display:block;position:absolute;right:0;top:14px}.user-post-actions i{font-size:28px!important}.post-actions-content{width:auto;height:auto;padding:10px 5px;background-color:#fff;position:absolute;right:15px;bottom:16px}.post-actions-content a,.post-actions-content p{display:block;padding:5px 10px;margin:0;cursor:pointer}.post-actions-content a:hover,.post-actions-content p:hover{background-color:#f2f2f2}.delete-modal .modal-overlay{background-color:rgba(0,0,0,.15);position:fixed;top:0;bottom:0;left:0;right:0;-webkit-transition:visibility 0s,opacity .4s linear;transition:visibility 0s,opacity .4s linear;z-index:99}.delete-modal .card{background-color:#fff}.invisible{visibility:hidden!important;opacity:0!important}.visible{visibility:visible!important;opacity:1!important}._1pbq{height:22px;width:22px}.btn__content svg{margin-right:3px}.btn__content span,.btn__content svg{vertical-align:middle}",""])},ViXb:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"search"},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{staticClass:"pa-3",staticStyle:{"background-color":"#fff"},attrs:{xs8:"","offset-xs2":""}},[s("v-text-field",{staticClass:"term",attrs:{"prepend-icon":"search",label:""!=t.term?"Search results for: ":"Search bolg...",flat:""},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search()}},model:{value:t.term,callback:function(e){t.term=e},expression:"term"}})],1),s("v-flex",{staticClass:"pb-3",attrs:{xs8:"","offset-xs2":""}},[s("v-tabs",{attrs:{slot:"extension","slider-color":"black",color:"white","icons-and-text":""},slot:"extension",model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[s("v-tab",{attrs:{href:"#tab-posts"}},[t._v("\n                    Posts\n                    "),s("v-icon",[t._v("event_note")])],1),s("v-tab",{attrs:{href:"#tab-people"}},[t._v("\n                    People\n                    "),s("v-icon",[t._v("person")])],1),s("v-tab-item",{attrs:{id:"tab-posts"}},[s("v-layout",{attrs:{column:"",nowrap:""}},t._l(t.posts,function(t,e){return s("postcard",{key:t.id,staticClass:"post xs12",attrs:{post:t,titleLength:50,excerptLength:90,index:e}})}))],1),s("v-tab-item",{attrs:{id:"tab-people"}},[s("v-layout",{attrs:{column:"",nowrap:""}},t._l(t.people,function(t,e){return s("personcard",{key:t.id,staticClass:"elevation-2",attrs:{person:t,index:e}})}))],1)],1)],1),s("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.isLoadingPosts,expression:"isLoadingPosts"}],staticClass:"inf-loader text-xs-center",attrs:{xs8:"","offset-xs2":""}},[s("v-progress-circular",{attrs:{indeterminate:"",size:50,width:7,color:"teal"}})],1)],1)],1)};o._withStripped=!0;var i={render:o,staticRenderFns:[]};e.a=i},a6wT:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-flex",{attrs:{xs12:""}},[s("div",{staticClass:"person",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.$router.push("/profile/"+t.person.url)}}},[s("div",{staticClass:"person-inner"},[s("div",{staticClass:"picture",style:"background-image: url("+t.person.display_picture+")",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.$router.push("/profile/"+t.person.url)}}}),s("div",{staticClass:"text",on:{click:function(e){t.$router.push("/profile/"+t.person.url)}}},[s("div",[s("h3",[t._v(t._s(t.person.name))])]),s("div",[t._v(t._s(t.person.about))])])]),s("div",[t.person.isMe?t._e():s("div",{staticClass:"follow"},[s("v-btn",{attrs:{outline:"",color:"black",loading:t.loading,disabled:t.loading},on:{click:t.follow}},[t._v("\n                "+t._s(1==t.person.isFollowing?"Unfollow":"Follow")+"\n                ")])],1)])])])};o._withStripped=!0;var i={render:o,staticRenderFns:[]};e.a=i},e1SC:function(t,e,s){"use strict";e.a=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw Error("maxHeight is required");var o="string"==typeof t?document.querySelectorAll(t):t;if(o){var i=s.character||"…",a=s.classname||"js-shave",n=s.spaces||!0,r='<span class="js-shave-char">'+i+"</span>";"length"in o||(o=[o]);for(var l=0;l<o.length;l+=1){var c=o[l],p=c.style,d=c.querySelector("."+a),u=void 0===c.textContent?"innerText":"textContent";d&&(c.removeChild(c.querySelector(".js-shave-char")),c[u]=c[u]);var h=c[u],f=n?h:h.split(" ");if(!(f.length<2)){var g=p.height;p.height="auto";var v=p.maxHeight;if(p.maxHeight="none",c.offsetHeight<=e)p.height=g,p.maxHeight=v;else{for(var b=f.length-1,m=0,x=void 0;m<b;)x=m+b+1>>1,c[u]=n?f.slice(0,x):f.slice(0,x).join(" "),c.insertAdjacentHTML("beforeend",r),c.offsetHeight>e?b=n?x-2:x-1:m=x;c[u]=n?f.slice(0,b):f.slice(0,b).join(" "),c.insertAdjacentHTML("beforeend",r);var _=n?f.slice(b):f.slice(b).join(" ");c.insertAdjacentHTML("beforeend",'<span class="'+a+'" style="display:none;">'+_+"</span>"),p.height=g,p.maxHeight=v}}}}}},i7u4:function(t,e,s){var o=s("MNqr");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("58691d8c",o,!1,{sourceMap:!1})},oIMZ:function(t,e,s){"use strict";var o=s("/stw"),i=s("a6wT"),a=!1;var n=function(t){a||s("Dd19")},r=s("VU/8")(o.a,i.a,!1,n,"data-v-e0e442e6",null);r.options.__file="components\\PersonCard.vue",e.a=r.exports},tAe9:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".search{margin-top:66px;padding:50px}.post{margin:10px 0 5px}.tabs__content{padding-top:10px}",""])},zqOD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("Fo/x"),i=s("ViXb"),a=!1;var n=function(t){a||s("0lll")},r=s("VU/8")(o.a,i.a,!1,n,null,null);r.options.__file="pages\\search\\_term.vue",e.default=r.exports}});